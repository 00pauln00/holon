  - set_fact:
       crc_on_all_peers: []

  - name: "{{ recipe_name }}: Get last-applied-cumulative-crc and sync-entry-crc."
    vars:
      stage: "verify_crc"
      raft_key:
          - "/raft_root_entry/0/last-applied-cumulative-crc"
          - "/raft_root_entry/0/sync-entry-crc"
    set_fact:
      crc_on_all_peers: "{{ lookup('niova_ctlrequest', 'lookup', NRunningPeers, raft_key, wantlist=True) }}"
    failed_when: >
         (crc_on_all_peers[itr]['/0/last-applied-cumulative-crc'] != crc_on_all_peers[itr + 1]['/0/last-applied-cumulative-crc']) or
         (crc_on_all_peers[itr]['/0/sync-entry-crc'] != crc_on_all_peers[itr + 1]['/0/sync-entry-crc'])
    loop: "{{ range(0, NRunningPeers | length - 1)| list }}"
    loop_control:
        loop_var: itr

