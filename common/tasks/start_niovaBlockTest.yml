---

     - name: "Generate uuid to write operation"
       shell: "/usr/bin/uuid"
       register: nblock_test_uuid

     - debug:
         msg: "niova_block_test UUID: {{ nblock_test_uuid['stdout'] }}"

     - name: "Generate client-uuids for niova-block-test"
       shell: "/usr/bin/uuid"
       register: nblock_client_uuid

     - debug:
         msg: "niova_block_test Client UUID: {{ nblock_client_uuid['stdout'] }}"

     - name: "{{ recipe_name }}: Start niova-block-test process."
       vars:
         input_param: {
                 'nisd_uuid_to_write' : 'unix:{{ nisd_uuid  }}',
                 'vdev' : '{{ nblock_test_uuid["stdout"] }}',
                 'lookout_uuid' :  '{{ lookout_UUID }}',
                 'client_uuid' : '{{ nblock_client_uuid["stdout"] }}',
                  }
       debug:
         msg: "{{ lookup('nisd_handler', 'niova-block-test', input_param, wantlist=True) }}"

     - name: "{{ recipe_name }}: Get system info after write operation."
       vars:
         stage: "get_system_info"
         nisd_keys:
              - "/nisd_root_entry/0/vblks-written"
              - "/nisd_root_entry/0/num-pblks-used"
              - "/nisd_root_entry/0/num-reserved-pblks-used"
              - "/nisd_chunks/0/vdev-uuid"
              - "/nisd_chunks/0/num-data-pblks"
              - "/nisd_chunks/0/num-meta-pblks"
              - "/nisd_chunks/0/num-reserved-meta-pblks"
         lookout_uuid: "{{ lookout_UUID }}"
       debug:
         msg: "{{ lookup('niova_ctlrequest', 'lookup', nisd_uuid, nisd_keys, 'nisd', lookout_uuid, wantlist=True) }}"


