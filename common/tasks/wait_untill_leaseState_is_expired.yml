---

    - name: "{{ recipe_name }}: Wait Untill LeaseState is {{ leaseState }}."
      vars:
        input_param: {
          'client': "{{ clientuuid }}",
          'resource': "{{ resourceuuid }}",
          'numOfLeases': "1",
          'getLeaseOutfile': "",
          'outFileName': "waitUntill_leaseSate_{{ leaseState}}_{{ resourceuuid }}"
          }
      debug:
         msg: "wait untill lease state is expired."
      until: lookup('lease_feature', 'LOOKUP_VALIDATE', input_param, wantlist=True) | dict2items | map(attribute='value') | list | last | map(attribute='LeaseRes') | map(attribute='LeaseState') | list | first == leaseState
      retries: 100
      delay: 1
